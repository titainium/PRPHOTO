#coding=utf-8
#!/usr/bin/env python

import os

from flask import Flask
from flask import send_from_directory
from flaskext.babel import Babel
from flaskext.bcrypt import Bcrypt
from flask.ext.pymongo import PyMongo

import config

app = Flask(__name__)
app.config.from_object('config.ConfigObj')

babel = Babel(app)
bcrypt = Bcrypt(app)
mongo = PyMongo(app)

@app.route('/favicon.ico')
def favicon():
    return send_from_directory(os.path.join(app.root_path, 'static/img'),
                               'favicon.ico',
                               mimetype = 'image/x-icon')

if __name__ == '__main__':
    def register_blueprints(app):
        from user.views import user
        from profile.views import profile
    
        app.register_blueprint(user)
        app.register_blueprint(profile)

    register_blueprints(app)
    app.run()
